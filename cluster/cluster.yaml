apiVersion: ctlptl.dev/v1alpha1
kind: Cluster
product: k3d
name: k3d-task-app-cluster
registry: ctlptl-registry
k3d:
  v1alpha5Simple:
    servers: 1
    agents: 2
    ports:
      - port: 8080:80
        nodeFilters:
          - loadbalancer
      - port: 8443:443
        nodeFilters:
          - loadbalancer
    
    options:
      k3d:
        wait: true
        timeout: "120s"
      k3s:
        extraArgs:
          - arg: --disable=traefik
            nodeFilters:
              - server:*
      kubeconfig:
        updateDefaultKubeconfig: true
        switchCurrentContext: true
